{"version":3,"sources":["pe-hoverimage.js"],"names":["peHoverImg","bg","initialize","options","cb","config","elems","bgSrc","transition","meta","reverse","bgColor","prop","hasOwnProperty","sheet","style","document","createElement","appendChild","createTextNode","head","insertRule","constructor","Array","map","e","querySelector","querySelectorAll","i","length","dataset","display","imgSrc","innerHTML","bgs","img","Image","onload","backgroundImage","src","init"],"mappings":"AAAA,GAAIA,YAAa,WAEf,YAEA,IAAIC,GAEAC,EAAa,SAAUC,EAASC,GAElC,GAAIC,IACFC,MAAO,kBACPC,MAAO,KACPC,WAAY,MACZC,MAAM,EACNC,SAAS,EACTC,QAAS,QAGX,KAAI,GAAIC,KAAQT,GACXA,EAAQU,eAAeD,KACxBP,EAAOO,GAAQT,EAAQS,GAI3B,IAAIE,GAAQ,WACX,GAAIC,GAAQC,SAASC,cAAc,QAInC,OAHAF,GAAMG,YAAYF,SAASG,eAAe,KAC1CH,SAASI,KAAKF,YAAYH,GAEnBA,EAAMD,QAGdA,GAAMO,WAAWhB,EAAOC,MAAQ,+BAAgC,GAChEQ,EAAMO,WAAWhB,EAAOC,MAAQ,8BAAgCD,EAAOG,WAAa,wBAA0BH,EAAOM,QAAU,MAAO,GAElIN,EAAOK,SACTI,EAAMO,WAAWhB,EAAOC,MAAQ,uBAAwB,GACxDQ,EAAMO,WAAWhB,EAAOC,MAAQ,6BAA8B,KAE9DQ,EAAMO,WAAWhB,EAAOC,MAAQ,uBAAwB,GACxDQ,EAAMO,WAAWhB,EAAOC,MAAQ,6BAA8B,IAGhEQ,EAAMO,WAAW,uIAAwI,GACzJP,EAAMO,WAAWhB,EAAOC,MAAQ,4CAA6C,GAE7EL,EAAKI,EAAOC,MAAMgB,cAAgBC,MAAQlB,EAAOC,MAAMkB,IAAI,SAASC,GAAI,MAAOT,UAASU,cAAcD,KAAST,SAASW,iBAAiBtB,EAAOC,MAEhJ,KAAK,GAAIsB,GAAI,EAAGA,EAAI3B,EAAG4B,OAAQD,KAE7B,SAAWA,GAET,GAAc,OAAV3B,EAAG2B,KAED3B,EAAG2B,GAAGE,QAAQvB,OAASF,EAAOE,OAAO,CAEhCN,EAAG2B,GAAGE,QAAQrB,MAAQJ,EAAOI,OAClCR,EAAG2B,GAAGF,cAAc,cAAcX,MAAMgB,QAAU,QAGhD9B,EAAG2B,GAAGE,QAAQE,SAChB/B,EAAG2B,GAAGK,UAAYhC,EAAG2B,GAAGK,UAAY,kCAAoChC,EAAG2B,GAAGE,QAAQE,OAAS,KAGjG,IAAIE,GAAMjC,EAAG2B,GAAGE,QAAQvB,MAAQN,EAAG2B,GAAGE,QAAQvB,MAAQF,EAAOE,KAE7D,IAAY,WAAR2B,EAAkB,CAEpB,GAAIC,GAAM,GAAIC,MACdD,GAAIE,OAAS,WACXpC,EAAG2B,GAAGb,MAAMuB,gBAAkB,OAASJ,EAAM,IAC7B,kBAAN9B,IACRA,KAIJ+B,EAAII,IAAML,KAQfN,GAMP,QACEY,KAAMtC","file":"pe-hoverimage.js","sourcesContent":["var peHoverImg = (function(){\n\n  \"use strict\";\n\n  var bg;\n\n  var initialize = function (options, cb) {\n\n    var config = {\n      elems: '.rk-item--hover',\n      bgSrc: null,\n      transition: '.3s',\n      meta: false,\n      reverse: false,\n      bgColor: 'white'\n    };\n\n    for(var prop in options) {\n      if(options.hasOwnProperty(prop)){\n        config[prop] = options[prop];\n      }\n    }\n\n    var sheet = (function() {\n    \tvar style = document.createElement('style');\n    \tstyle.appendChild(document.createTextNode(''));\n    \tdocument.head.appendChild(style);\n\n    \treturn style.sheet;\n    })();\n\n    sheet.insertRule(config.elems + ' { background-size: cover; }', 0);\n    sheet.insertRule(config.elems + ' img { transition: opacity ' + config.transition + '; outline: 1px solid ' + config.bgColor + '; }', 1);\n\n    if (config.reverse) {\n      sheet.insertRule(config.elems + ' img { opacity: 0; }', 2);\n      sheet.insertRule(config.elems + ':hover img { opacity: 1; }', 3);\n    } else {\n      sheet.insertRule(config.elems + ' img { opacity: 1; }', 2);\n      sheet.insertRule(config.elems + ':hover img { opacity: 0; }', 3);\n    }\n\n    sheet.insertRule('.pe-img-added { position: absolute; top:50%; left:50%; transform: translate(-50%, -50%); -webkit-transform: translate(-50%, -50%); }', 4);\n    sheet.insertRule(config.elems + ':hover { background-color: transparent; }', 5);\n\n    bg = config.elems.constructor === Array ? config.elems.map(function(e){ return document.querySelector(e); }) : document.querySelectorAll(config.elems);\n\n    for (var i = 0; i < bg.length; i++) {\n\n      (function (i) {\n\n        if (bg[i] !== null) {\n\n          if (bg[i].dataset.bgSrc || config.bgSrc) {\n\n            if ( !(bg[i].dataset.meta || config.meta) ) {\n              bg[i].querySelector('.item-meta').style.display = 'none';\n            }\n\n            if (bg[i].dataset.imgSrc) {\n              bg[i].innerHTML = bg[i].innerHTML + '<img class=\"pe-img-added\" src=\"' + bg[i].dataset.imgSrc + '\">';\n            }\n\n            var bgs = bg[i].dataset.bgSrc ? bg[i].dataset.bgSrc : config.bgSrc;\n\n            if (bgs !== 'origin') {\n              // bg[i].style.backgroundImage = \"url(\" + bgs + \")\";\n              var img = new Image();\n              img.onload = function() {\n                bg[i].style.backgroundImage = \"url(\" + bgs + \")\";\n                if(typeof cb == \"function\" ) {\n                  cb();\n                }\n              };\n\n              img.src = bgs;\n\n            }\n\n          }\n\n        }\n\n      })(i); // loop closure\n\n    } // for loop\n\n  }; // Init()\n\n  return {\n    init: initialize\n  };\n\n});\n"],"sourceRoot":"/source/"}